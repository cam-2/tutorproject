<div style = "margin-top: 5%;"></div>
{{>message}}

<div>
  <script type="module" src="./calendarScripts.js"></script>

  <center>
    <!-- Button trigger modal -->
    <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal">
      Add an Appointment
    </button>
    <!-- Add an event modal button -->
    <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">Add an Appointment</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
                    <div>
                      <form action="/addCalendarEvent" method="POST">
                        <div>
                          {{!-- <label for='topics'> <b>Topic:</b> </label>
                          <div>
                              <select name="event_subj" one size="3">
                                  <option value="Math">Math</option>
                                  <option value="Physics">Physics</option>
                                  <option value="History">History</option>
                                  <option value="English">English</option>
                                  <option value="Philosophy">Philosophy</option>
                                  <option value="Chemistry">Chemistry</option>
                                  <option value="Biology">Biology</option>
                                  <option value="Calculus">Calculus</option>
                                  <option value="Probability">Probability</option>
                                  <!-- etc -->
                              </select>
                          </div> --}}
                          Subject:<input type="text" id="dummy_subj" name="evnt_subj">
                          <br>
                          Start Time:<input type="datetime-local" id="dummy_starttime" name="evnt_stime">
                          <br>
                          End Time:<input type="datetime-local" id="dummy_endtime" name="evnt_etime">
                          <br>
                        </div>
                      {{!-- </form> --}}
                    </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            <button type="submit" class="btn btn-primary">Save changes</button>
          </div>
          </form>
        </div>
      </div>
    </div>
  </center>

  <div class="container">
    <div id="event-modal">
      <div id="calendar" class="row">
        <!-- CHANGE FUNC CALL TO getDayCol(day):
                NEED TO PREFORMAT DAY BEFORE CALLING
                BUT NECESSARY IF WANT TO RENDER OTHER
                WEEKS THAN JUST THIS WEEK
        -->
        {{#each synthedData}}
          <div class="col-2 card container">
            <h2>{{dayName}} ({{date}})</h2>
            {{#if events.length}}
              {{#each events}}
                <div class="event-box">
                  <p>Event ID: {{id}}, Subject: {{subject}}, Start Time: {{start_time}}</p>
                  <!-- Add more event details as needed -->
                </div>
                <div>
                  <!-- EDIT AN APPOINTMENT LOGIC GOES HERE (BOOK IT, CHANGE FIELDS IF PROPER TUTOR, ETC.) 
                       THIS WILL BE A BUTTON TO OPEN THE MODAL FORM.
                       LOOK AT 'ADD APPOINTMENT' BUTTON FOR INSPIRATION
                  -->
                  <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#event-box-{{id}}"> <!-- I'm not 100% sure if the data-toggle should be event-box or not -->
                    Edit
                  </button>
                    <center>
                      <div class="modal fade" id="event-box-{{id}}" tabindex="-1" role="dialog" aria-labelledby="event-boxLabel" aria-hidden="true">
                        <div class="modal-dialog" role="document">
                          <div class="modal-content">
                            <div class="modal-header">
                              <h5 class="modal-title" id="exampleModalLabel">Book an Appointment</h5>
                              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                              </button>
                            </div>
                            <div class="modal-body">
                                      <div>
                                        <form action="/editCalendarEvent" method="POST">
                                          Leave a Note:<input type="text" id="dummy_tb" name="dummy_notebox">
                                      </div>
                            </div>
                            <div class="modal-footer">
                              <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                              <button type="submit" class="btn btn-primary">Book Appointment</button>
                            </div>
                            </form>
                          </div>
                        </div>
                      </div>
                    </center>
                </div>
              {{/each}}
            {{else}}
              <p>No events for this day.</p>
            {{/if}}
          </div>
        {{/each}}
      </div>
    </div>
  </div>   
</div>

<style>
/* Custom CSS */
.day-column {
  /* Adjust width and height of the day column */
  width: 10%; /* Adjust as needed */
  min-height: 200px; /* Adjust as needed */
}

.card-container {
  /* Ensure all cards align in a row */
  display: flex;
  flex-wrap: nowrap;
}

.day-card {
  /* Adjust card styles */
  width: calc(90% / 7); /* Adjust card width based on number of days */
  margin: 5px; /* Adjust margin as needed */
}
</style>

